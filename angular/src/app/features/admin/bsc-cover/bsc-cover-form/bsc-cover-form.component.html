<form [formGroup]="this.recordForm" (ngSubmit)="submitted=true; this.saveRecord();">
    <div class="form-container">
        <div class="grid">
            <div class="col-12">
                <div class="card p-fluid">
                    <p-toast></p-toast>
                    <p-toolbar styleClass="">
                        <ng-template pTemplate="left">
                            <h3 class="mb-0">{{this.recordSingularName}}</h3>
                        </ng-template>
                        <ng-template pTemplate="right">
                            <button type="submit" pButton pRipple label="Save" icon="pi pi-check"
                                class="p-button-success mr-2"></button>
                            <button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-danger mr-2 pr-3"
                                (click)="this.onCancel()"></button>
                        </ng-template>
                    </p-toolbar>
                </div>
            </div>
            <div class="col">

                <div class="card p-fluid">
                    <h5>General Information</h5>
                    <div class="field" >
                        <label for="name">Partner</label>
                        <p-autoComplete [disabled]="this.mode == 'edit'"  [dropdown]="true" optionValue="value" field="label" formControlName="partnerId" [suggestions]="this.optionsPartners" (completeMethod)="this.searchOptionsPartners($event)" [ngClass]="{'ng-invalid ng-dirty': submitted && !recordForm.controls['partnerId'].valid}"></p-autoComplete>
                        <small *ngIf="this.recordForm.controls['partnerId'].errors?.required" class="ng-invalid">This field Required.</small>
                    </div>

                    <div class="field">
                        <label for="bscType">BSC Type</label>
                        <!-- <input class="form-control" type="text" pInputText id="bscType" formControlName="bscType" required autofocus [ngClass]="{'ng-invalid ng-dirty': submitted && !recordForm.value['bscType']}" /> -->
                        <p-dropdown class="form-control"
                            [options]="this.optionsBscTypes" placeholder="Select a BSC Type" optionLabel="label"
                            optionValue="value" [showClear]="true" formControlName="bscType"
                            [ngClass]="{'ng-invalid ng-dirty': submitted && !recordForm.controls['bscType'].valid}"></p-dropdown>
                        <small class="ng-dirty ng-invalid" *ngIf="submitted && !recordForm.value['bscType']">BSC Type is
                            required.</small>
                    </div>

                    <div class="field">
                        <label for="fromSI">From SI</label>
                        <input class="form-control" type="number" pInputText id="fromSI" formControlName="fromSI"
                             autofocus
                            [ngClass]="{'ng-invalid ng-dirty': submitted && !recordForm.value['fromSI']}" />
                        <small class="ng-dirty ng-invalid" *ngIf="submitted && !recordForm.value['fromSI']">This field
                            is
                            required.</small>
                    </div>

                    <div class="field">
                        <label for="toSI">To SI</label>
                        <input class="form-control" type="number" pInputText id="toSI" formControlName="toSI" 
                            autofocus [ngClass]="{'ng-invalid ng-dirty': submitted && !recordForm.value['toSI']}" />
                        <small class="ng-dirty ng-invalid" *ngIf="submitted && !recordForm.value['toSI']">This field is
                            required.</small>
                    </div>
                    <div class="field">
                        <label for="toSI">Max NSTP</label>
                        <input class="form-control" type="number" pInputText id="maxNstp" formControlName="maxNstp" 
                            autofocus [ngClass]="{'ng-invalid ng-dirty': submitted && !recordForm.value['maxNstp']}" />
                        <small class="ng-dirty ng-invalid" *ngIf="submitted && !recordForm.value['maxNstp']">This field is
                            required.</small>
                    </div>

                    <div class="field">
                        <label for="ratePerMile">Rate per Mile</label>
                        <input class="form-control" type="text" pInputText id="ratePerMile"
                            formControlName="ratePerMile"  autofocus
                            [ngClass]="{'ng-invalid ng-dirty': submitted && !recordForm.value['ratePerMile']}" />
                        <small class="ng-dirty ng-invalid" *ngIf="submitted && !recordForm.value['ratePerMile']">Rate
                            per Mile is
                            required.</small>
                    </div>

                    <div class="field">
                        <label for="productId">Product</label>
                        <p-autoComplete [disabled]="this.mode == 'edit'" [dropdown]="true"
                            [suggestions]="this.optionsProducts" field="label" formControlName="productId"
                            (completeMethod)="this.searchOptionsProducts($event)"
                            [ngClass]="{'ng-invalid ng-dirty': submitted && !recordForm.controls['productId'].valid}">
                        </p-autoComplete>

                        <small class="ng-dirty ng-invalid" *ngIf="submitted && !recordForm.value['productId']">Product
                            is
                            required.</small>
                    </div>

                    <div class="field">
                        <label for="applicableFrom">Applicable from</label>
                        <p-calendar [disabled]="this.mode == 'edit'" class="form-control" type="text"
                            id="applicableFrom" formControlName="applicableFrom" required autofocus [showIcon]="true"
                            [ngClass]="{'ng-invalid ng-dirty': submitted && !recordForm.value['applicableFrom']}"
                            dateFormat="yy-mm-dd"></p-calendar>
                        <small class="ng-dirty ng-invalid"
                            *ngIf="submitted && !recordForm.value['applicableFrom']">Applicable from date is
                            required.</small>
                    </div>

                    <div class="field">
                        <label for="applicableTo">Applicable To</label>
                        <p-calendar class="form-control" type="text" id="applicableTo" formControlName="applicableTo"
                            required autofocus [showIcon]="true"
                            [ngClass]="{'ng-invalid ng-dirty': submitted && !recordForm.value['applicableTo']}"
                            dateFormat="yy-mm-dd"></p-calendar>
                        <small class="ng-dirty ng-invalid"
                            *ngIf="submitted && !recordForm.value['applicableTo']">Applicable to date is
                            required.</small>
                    </div>

                    <div class="field" *ngIf="this.mode == 'edit' && this.user?.partnerId?.partnerType == 'self' && recordForm.controls.taskStatus.value">
                        <label for="taskStatus" id="BscCoverForm_taskStatusLabel">Task Status</label>
                        <input id="BscCoverForm_taskStatus" class="form-control" type="text" pInputText id="taskStatus"
                        formControlName="taskStatus" />
                    </div>

                    <div class="field" *ngIf="this.mode == 'edit'  && this.user?.partnerId?.partnerType == 'self' && recordForm.controls.taskStatus.value == 'failed'">
                        <label for="failedMessage" id="BscCoverForm_failedMessageLabel">Failed Reasson</label>
                        <input id="BscCoverForm_failedMessage" class="form-control" type="text" pInputText id="failedMessage"
                        formControlName="failedMessage" />
                    </div>

                    <div class="field">
                        <label id="UserForm_ActiveLabel" for="configMenuType">Is Zone Wise Rate</label>
                        <p-toggleButton id="UserForm_Active" class="form-control" formControlName="isZoneWiseRate"
                            [onLabel]="'Active'" [offLabel]="'In-Active'" [onIcon]="'pi pi-check'" (onChange)="addValidatonstoZone($event)"
                            offIcon="pi pi-times" iconPos="right"></p-toggleButton>
                    </div>

                    <div class="field">
                        <label for="eqZone1">Eq Zone 1</label>
                        <input class="form-control" type="text" pInputText id="eqZone1"
                            formControlName="eqZone1"  autofocus
                            [ngClass]="{'ng-invalid ng-dirty': submitted && recordForm.controls['eqZone1'].errors?.required}" />
                        <small class="ng-dirty ng-invalid" *ngIf="submitted && recordForm.controls['eqZone1'].errors?.required">This field is
                            required.</small>
                    </div>

                    <div class="field">
                        <label for="eqZone2">Eq Zone 2</label>
                        <input class="form-control" type="text" pInputText id="eqZone2"
                            formControlName="eqZone2"  autofocus
                            [ngClass]="{'ng-invalid ng-dirty': submitted && recordForm.controls['eqZone2'].errors?.required}" />
                        <small class="ng-dirty ng-invalid" *ngIf="submitted && recordForm.controls['eqZone2'].errors?.required">This field is
                            required.</small>
                    </div>

                    <div class="field">
                        <label for="eqZone3">Eq Zone 3</label>
                        <input class="form-control" type="text" pInputText id="eqZone3"
                            formControlName="eqZone3"  autofocus
                            [ngClass]="{'ng-invalid ng-dirty': submitted && recordForm.controls['eqZone3'].errors?.required}" />
                        <small class="ng-dirty ng-invalid" *ngIf="submitted && recordForm.controls['eqZone3'].errors?.required">This field is
                            required.</small>
                    </div>

                    <div class="field">
                        <label for="eqZone4">Eq Zone 4</label>
                        <input class="form-control" type="text" pInputText id="eqZone4"
                            formControlName="eqZone4"  autofocus
                            [ngClass]="{'ng-invalid ng-dirty': submitted && recordForm.controls['eqZone4'].errors?.required}" />
                        <small class="ng-dirty ng-invalid" *ngIf="submitted && recordForm.controls['eqZone4'].errors?.required">This field is
                            required.</small>
                    </div>

                    <div class="field">
                        <label for="stfiRate">Stfi Rate</label>
                        <input class="form-control" type="text" pInputText id="stfiRate"
                            formControlName="stfiRate"  autofocus
                            [ngClass]="{'ng-invalid ng-dirty': submitted && recordForm.controls['stfiRate'].errors?.required}" />
                        <small class="ng-dirty ng-invalid" *ngIf="submitted && recordForm.controls['stfiRate'].errors?.required">This field is
                            required.</small>
                    </div>

                </div>
            </div>
            <div class="col-12 md:col-3" *ngIf="this.id !== 'new'">

                <div class="card p-fluid">
                    <app-audit-trail [entityId]="this.id" [entityResourcePrefix]="'cities'"></app-audit-trail>
                </div>

            </div>
        </div>
    </div>
</form>