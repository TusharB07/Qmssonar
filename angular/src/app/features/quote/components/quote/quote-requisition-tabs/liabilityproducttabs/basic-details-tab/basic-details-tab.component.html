<div class="form-container px-3 pt-3">
    <div class="grid">
        <div class="col-12 mx-0">
            <div class="col-12">
                <div class="grid">
                    <div class="col-6">
                        <p-card>
                            <div class="grid">
                                <div class="col-10">
                                    <label class="form-label">Details of Business Activity <span
                                            style="color: red;">*</span></label>
                                    <input pInputText type="text" placeholder="Type here"
                                        [(ngModel)]="this.quoteDandOOptions.detailsOfBusinessActivity"
                                        #detailsOfBusinessActivity="ngModel" id="detailsOfBusinessActivity"
                                        name="detailsOfBusinessActivity" />
                                </div>
                            </div>
                            <div class="grid">
                                <div class="col-10">
                                    <label for="" class="form-label" style="margin-top: 1rem ;"
                                        id="retroactiveCover">Retroactive Details <span
                                            style="color: red;"></span></label>
                                    <p-dropdown class="form-control" [options]="this.optionsRetroactiveCover"
                                        placeholder="Select" optionLabel="label" optionValue="value"
                                        [(ngModel)]="this.quoteDandOOptions.retroactiveCoverId"
                                        #retroactiveCoverId="ngModel" id="retroactiveCoverId" name="retroactiveCoverId"
                                        appendTo="body"></p-dropdown>
                                </div>
                            </div>
                            <div class="grid">
                                <div class="col-10 p-inputtext1 text-left">
                                    <label for="" class="form-label" style="margin-top: 1rem ;"
                                        id="dateOfIncorporation">Retroactive Date <span
                                            style="color: red;">*</span></label>
                                    <p-calendar id="dateOfIncorporation" aria-placeholder="Select Date"
                                        [(ngModel)]="quoteDandOOptions.dateOfIncorporation" [showIcon]="true"
                                        name="dateOfIncorporation" #dateOfIncorporation="ngModel"
                                        class="text-left"></p-calendar>
                                </div>
                            </div>
                            <div class="grid">
                                <div class="col-10 p-inputtext1 text-left">
                                    <label class="form-label">Any Additional Information ?</label>
                                    <textarea pInputText type="text" placeholder="Type here"
                                        [(ngModel)]="this.quoteDandOOptions.additionalInformation"
                                        #additionalInformation="ngModel" id="additionalInformation"
                                        name="additionalInformation"></textarea>
                                </div>
                            </div>
                            <div class="button-container">
                                <button type="button" id="btn_Save" pButton pRipple label="Save" icon="pi pi-check"
                                    (click)="save()" class="btn btn-success align-Right"></button>
                            </div>
                        </p-card>


                        <p-card>
                            <div class="grid">
                                <div class="col-8">
                                    <h3 style="font-size: medium; font-weight: bold;">Upload Attachments</h3>
                                </div>
                            </div>
                            <div class="grid">
                                <div class="col-12">
                                    <p-dropdown class="form-control"
                                        [options]="templateName == 'LIABILITY_CRIME' ? this.cloptionAttachmentTypes : this.optionAttachmentTypes"
                                        placeholder="Select Type" optionLabel="label" optionValue="value"
                                        [(ngModel)]="selectedAttachment" #uploadAttachmentddl="ngModel"
                                        id="uploadAttachmentddl" name="uploadAttachmentddl" appendTo="body"
                                        (onChange)="onAttachmentTypeChange($event)"></p-dropdown>
                                    <div class="col-8 text-left mt-1" *ngIf="selectedAttachment=='Others'">
                                        <div class="ml-auto">
                                            <input maxlength="255" pInputText id="attachemntTypeOther"
                                                autocomplete="off" [(ngModel)]="attachemntTypeOther"
                                                name="attachemntTypeOther" type="text" placeholder="Type here"
                                                class="p-inputtext1 text-left mt-1"
                                                (focusout)="onOtherAttachmentInputFocusOut()" />
                                        </div>
                                    </div>
                                    <div>
                                        <p-fileUpload #fileUpload *ngIf="checkIfFileUploadVisible()"
                                            id="basicDeatilscard_Attachments_Upload" [auto]="true"
                                            (onUpload)="this.onUploadBasicDetailsAttachmentUpload()"
                                            styleClass="upload-outline-light"
                                            (onError)="this.errorHandler($event, fileUpload)"
                                            name="basic_deatils_files_upload" mode="advanced"
                                            url="{{this.uploadbasicDetailsAttachmentUrl}}" accept=""
                                            maxFileSize="10000000" chooseIcon="pi pi-paperclip"
                                            chooseLabel="Upload Attachment" [headers]="this.uploadHttpHeaders"
                                            method="post"></p-fileUpload>
                                    </div>
                                </div>
                            </div>
                            <div class="grid">
                                <div class="col-12">
                                    <div *ngIf="savedBasicDetailsAttachment.length>0">
                                        <table>
                                            <thead>
                                                <tr>
                                                    <th style="text-align: center;">Attachment Type</th>
                                                    <th style="text-align: center;">File Name</th>
                                                    <th style="text-align: center;">View</th>
                                                    <th style="text-align: center;">Download</th>
                                                    <th style="text-align: center;">Delete</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let attachment of savedBasicDetailsAttachment">
                                                    <td>{{ attachment.attachmentSubType + ' - ' +
                                                        attachment.attachmentType }}</td>
                                                    <td>{{ attachment.fileName }}</td>
                                                    <td style="text-align: center;">
                                                        <i class="pi pi-eye"
                                                            style="cursor: pointer; color: blue; font-size: 18px;"
                                                            (click)="downloadBasicDetailsAttachmentsDetails(attachment.id)"
                                                            title="View"></i>
                                                    </td>
                                                    <td style="text-align: center;">
                                                        <i class="pi pi-download"
                                                            style="cursor: pointer; color: blue; font-size: 18px;"
                                                            (click)="downloadBasicDetailsAttachmentsDetailsfile(attachment.id)"
                                                            title="Download"></i>
                                                    </td>
                                                    <td style="text-align: center;">
                                                        <i class="pi pi-trash"
                                                            style="cursor: pointer; color: red; font-size: 18px;"
                                                            (click)="deleteBasicDetailsAttachmentsDetails(attachment.id)"
                                                            title="Delete"></i>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </p-card>
                    </div>

                    <div class="col-6">
                        <p-card>
                            <ng-template pTemplate="header">
                                <div class="grid" style="margin-bottom: 20px;">
                                    <div class="col-8">
                                        <h3 class="mb-2" style="font-size: large; font-weight: bold;"
                                            id="IndicativeQuoteTab_TotalIndicative">Total Indicative Quote</h3>
                                        <label for="" id="lblClientIndustry"
                                            style="font-size: xx-small;  font-weight: bold;"
                                            *ngIf="templateName=='LIABILITY'">Liability - Directors &
                                            Officers Insuarance Policy</label>
                                        <label for="" id="lblClientIndustry"
                                            style="font-size: xx-small;  font-weight: bold;"
                                            *ngIf="templateName=='LIABILITY_CRIME'">Liability - Crime Insuarance
                                            Policy</label>
                                        <p class="sub-head" id="IndicativeQuoteTab_ProductType">
                                            {{this.quote?.productId?.type}}</p>
                                    </div>
                                    <div class="col-4 text-right" *ngIf="this.quote.partnerId['isRate'] == true">
                                        <p class="premium" id="IndicativeQuoteTab_TotalPremium_Label">Total Premium
                                        </p>
                                        <!-- <p class="premium-price" id="IndicativeQuoteTab_TotalPremium" pTooltip="{{this.toWords.convert(this.quote?.totalIndictiveQuoteAmt, { currency: true ,ignoreZeroCurrency: true })}}">{{(this.quote?.totalIndictiveQuoteAmt ?? 0).toLocaleString('en-IN' , {style: 'currency', currency: 'INR'}) }}</p> -->
                                        <p class="premium-price " id="IndicativeQuoteTab_TotalPremium"><span>
                                                <!-- <app-currency
                                                        [value]="this.quote?.totalIndictiveQuoteAmt ?? 0"></app-currency>-->
                                                <app-currency-dollar-repee [maximumFractionDigits]="0"
                                                    [rate]="this.quote?.dollarRate"
                                                    [selectedCurrencyDollar]="this.quote?.selectedCurrency=='$ Dollar'"
                                                    [value]='this.quoteDandOOptions?.totalPremiumAmt ?? 0'></app-currency-dollar-repee>
                                            </span>
                                        </p>
                                    </div>
                                </div>
                            </ng-template>
                            <div class="view-breakup h-100">
                                <div class="grid mb-2">
                                    <div class="col-8">
                                        <span class="name" id="IndicativeQuoteTab_BasePremium_Label">Limit of
                                            Liability:</span>
                                        <!-- <span class="price" id="IndicativeQuoteTab_BasePremium" pTooltip="{{this.toWords.convert(this.quote?.totalIndictiveQuoteAmt, { currency: true ,ignoreZeroCurrency: true })}}">{{(this.quote?.totalIndictiveQuoteAmt ?? 0).toLocaleString('en-IN' , {style: 'currency', currency: 'INR'}) }}</span> -->
                                        <!-- <span class="price" id="IndicativeQuoteTab_BasePremium"><app-currency [value]="this.quote?.totalIndictiveQuoteAmt ?? 0"></app-currency></span> -->
                                        <span class="price"
                                            id="IndicativeQuoteTab_BasePremium"><app-currency-dollar-repee
                                                [maximumFractionDigits]="0" [rate]="this.quote?.dollarRate"
                                                [selectedCurrencyDollar]="this.quote?.selectedCurrency=='$ Dollar'"
                                                [value]='this.quoteDandOOptions?.limitOfLiability'></app-currency-dollar-repee></span>
                                    </div>
                                </div>
                                <div class="grid mb-3">
                                    <!-- <div class="col-8">
                                                <span class="name" id="IndicativeQuoteTab_PropertyValue_Label">Property Value:</span> -->
                                    <!-- <span class="price" id="IndicativeQuoteTab_PropertyValue">{{(this.quote.totalSumAssured).toLocaleString('en-IN' , {style: 'currency', currency: 'INR'})}} </span> -->
                                    <!-- <span class="price" id="IndicativeQuoteTab_PropertyValue"><app-currency [maximumFractionDigits]="0" [value]="this.quote?.totalSumAssured ?? 0"></app-currency> </span>
                                            </div> -->
                                </div>
                                <div class="grid">
                                    <div class="col-12">
                                        <ul class="covers-list font-size:small">
                                            <li id="IndicativeQuoteTab_CoversOpted">Covers Opted
                                                (<span>{{selectedCoversCount}}</span>)</li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="grid">
                                    <div class="col-12">
                                        <ul class="covers-list font-size:small">
                                            <li id="IndicativeQuoteTab_CoversOpted">Deductibles
                                                (<span>{{deductibilitiesCount}}</span>)</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="grid mb-3">
                                    <div class="col-12">
                                        <button id="IndicativeQuoteTab_ViewDetailsDialog" label="View Details"
                                            type="button" class="btn btn-primary  mr-2"
                                            (click)="openFlexaCoversDialog()">View Details</button>

                                        <!-- <button id="IndicativeQuoteTab_PaidAddOns" type="button" class="btn btn-outline-primary">Paid Add-Ons (10)</button> -->
                                    </div>
                                </div>
                            </div>
                        </p-card>

                        <!-- <p-card *ngIf="templateName=='LIABILITY'">
                            <div class="grid">
                                <div class="col-8">
                                    <h3 style="font-size: medium; font-weight: bold;">Limit of Liability</h3>
                                </div>
                            </div>
                            <div class="grid">
                                <div class="col-6">
                                    <label for="" class="form-label" id="aoaAoy">AOA : AOY <span
                                            style="color: red;">*</span></label>
                                    <p-dropdown class="form-control" [options]="this.optionsAoaAoy"
                                        placeholder="Select Type" optionLabel="label" optionValue="value"
                                        [(ngModel)]="this.quoteDandOOptions.aoaAoyId" #aoaAoyId="ngModel" id="aoaAoyId"
                                        name="aoaAoyId" appendTo="body"
                                        (onChange)="onDropdownAOAChange($event)"></p-dropdown>
                                </div>
                                <div class="col-6" *ngIf="this.quote?.selectedCurrency != '$ Dollar'">
                                    <label for="" class="form-label" id="limitOfLiabilitylbl">Limit of
                                        Liability</label>
                                    <input maxlength="255" pInputText id="limitOfLiability" name="limitOfLiability"
                                        placeholder="₹ 0" currencyMask [(ngModel)]="this.quoteDandOOptions.limitOfLiability"
                                        #limitOfLiability="ngModel" [options]="{ prefix: '₹ ' , precision:0 }"
                                        class="p-inputtext1 text-left" readonly />
                                </div>
                                <div class="col-6" *ngIf="this.quote?.selectedCurrency == '$ Dollar'">
                                    <label for="" class="form-label" id="limitOfLiabilitylbl">Limit of
                                        Liability</label>
                                    <input maxlength="255" pInputText id="limitOfLiabilityAOAAOY"
                                        name="limitOfLiabilityAOAAOY" placeholder="$ 0" currencyMask
                                        [(ngModel)]="this.limitOfLiabilityAOAAOY" #limitOfLiabilitylbl="ngModel"
                                        [options]="{ prefix: '$ ' , precision:0 }" class="p-inputtext1 text-left"
                                        readonly />

                                </div>
                            </div>
                            <div class="grid ">
                                <div class="col-6" *ngIf="this.quote?.selectedCurrency!='$ Dollar'">
                                    <label for="" class="form-label" id="anyOneAccident">Any One Accident</label>
                                    <input pInputText type="text" placeholder="Upload Here"
                                        [(ngModel)]="this.quoteDandOOptions.anyOneAccident" currencyMask
                                        [options]="{ prefix: '₹ ' , precision:0 }" #anyOneAccident="ngModel"
                                        id="anyOneAccident" name="anyOneAccident" readonly />

                                </div>

                                <div class="col-6" *ngIf="this.quote?.selectedCurrency =='$ Dollar'">
                                    <label for="" class="form-label" id="anyOneAccidentAOAAOY">Any One Accident</label>
                                    <input pInputText type="text" placeholder="$ 0"
                                        [(ngModel)]="this.anyOneAccidentAOAAOY" currencyMask
                                        [options]="{ prefix: '$ ' , precision:0 }" #anyOneAccidentAOAAOYY="ngModel"
                                        id="anyOneAccidentAOAAOY" name="anyOneAccidentAOAAOY" readonly />

                                </div>

                                <div class="col-6" *ngIf="this.quote?.selectedCurrency !='$ Dollar'">
                                    <label for="" class="form-label" id="inTheAggregate">In The Aggregate</label>
                                    <input pInputText type="text" placeholder="Upload Here"
                                        [(ngModel)]="this.quoteDandOOptions.inTheAggregate" currencyMask
                                        [options]="{ prefix: '₹ ' , precision:0 }" #inTheAggregate="ngModel"
                                        id="inTheAggregate" name="inTheAggregate" readonly />
                                </div>

                                <div class="col-6" *ngIf="this.quote?.selectedCurrency =='$ Dollar'">
                                    <label for="" class="form-label" id="inTheAggregateAOAAOY">In The Aggregate</label>
                                    <input pInputText type="text" placeholder="$ 0"
                                        [(ngModel)]="this.inTheAggregateAOAAOY" currencyMask
                                        [options]="{ prefix: '$ ' , precision:0 }" #inTheAggregateAOAAOYY="ngModel"
                                        id="inTheAggregateAOAAOY" name="inTheAggregateAOAAOY" readonly />
                                </div>
                            </div>
                            <div class="button-container">
                                <button type="button" id="btn_Save" pButton pRipple label="Save" icon="pi pi-check"
                                    (click)="save()" class="btn btn-success align-Right"
                                    style="margin-top: 25px;"></button>
                            </div>
                        </p-card> -->

                        <p-card *ngIf="templateName=='LIABILITY_CRIME'">
                            <div class="grid">
                                <div class="col-8">
                                    <h3 style="font-size: medium; font-weight: bold;">Details of Employee</h3>
                                </div>
                            </div>
                            <div class="grid">
                                <div class="col-6">
                                    <label class="form-label">Total number of Employees <span
                                            style="color: red;">*</span></label>
                                    <p-inputNumber mode="decimal" placeholder="0" id="totalNumberOfEmployees"
                                        locale="en-IN" autocomplete="off" maxlength="20"
                                        [(ngModel)]="this.quoteDandOOptions.totalNumberOfEmployees"
                                        name="totalNumberOfEmployees" #totalNumberOfEmployees="ngModel"
                                        [minFractionDigits]="0" class="text-right"></p-inputNumber>

                                </div>
                            </div>
                            <div class="from-row">
                                <div class="col-12 mt-1">
                                    <table style="margin: 0 auto; width: 100%; text-align: center;">
                                        <thead>
                                            <tr>
                                                <th style="text-align: center;">Sr. No</th>
                                                <th style="text-align: center;width: 30% !important;">Country Name</th>
                                                <th style="text-align: center;">Number of Employees</th>
                                                <th style="text-align: center;">Action</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let item of quoteDandOOptions.employeesDetails; let i = index">
                                                <td>{{i+1}}</td>
                                                <td>
                                                    <p-dropdown class="form-control" [options]="this.countryList"
                                                        placeholder="Select" optionLabel="label" optionValue="value"
                                                        [(ngModel)]="item.countryId" #countryIdId="ngModel"
                                                        id="countryIdId" name="countryIdId"
                                                        (onChange)="setCountryName(item)" appendTo="body"></p-dropdown>
                                                </td>
                                                <td>
                                                    <p-inputNumber mode="decimal" placeholder="0"
                                                        id="numberOfEmployees_{{i}}" locale="en-IN" autocomplete="off"
                                                        maxlength="20" [(ngModel)]="item.numberOfEmployees"
                                                        name="numberOfEmployees_{{i}}" #numberOfEmployees="ngModel"
                                                        [minFractionDigits]="0" class="text-right"
                                                        (focusout)="handleEmployeesDetailsNoOfEmployeesChange($event,item,i)"
                                                        [disabled]="!item.countryId"></p-inputNumber>
                                                </td>
                                                <td style="text-align: center;">
                                                    <button pButton pRipple label="Delete" icon="pi pi-trash"
                                                        class="btn btn-danger" style="height: 30px; line-height: 1;"
                                                        (click)="removeRow(i)"></button>
                                                </td>

                                            </tr>

                                            <!-- Add more rows as needed -->
                                        </tbody>
                                    </table>
                                    <button class="btn btn-info add-button" (click)="addEmployyeeDetails()">
                                        + Add More
                                    </button>
                                </div>
                            </div>


                            <div class="button-container">
                                <button type="button" id="btn_Save" pButton pRipple label="Save" icon="pi pi-check"
                                    (click)="saveForEmployee()" class="btn btn-success align-Right"
                                    style="margin-top: 25px;"></button>
                            </div>
                        </p-card>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>