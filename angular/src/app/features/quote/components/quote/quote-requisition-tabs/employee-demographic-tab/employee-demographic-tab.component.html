<div class="grid">
  <div class="col-12 mx-0">
    <button type="button" (click)="saveEmpDemographic(true)" id="empDemoraphic_Save" pButton pRipple label="Save"
      icon="pi pi-check" class="btn btn-success"></button>

    <div class="grid mt-1">
      <div class="col-5">
        <p-card class="">
          <div class="grid">
            <div class="col-8 p-2">
              <h4>Policy Details</h4>
            </div>
          </div>
          <div>
            <p-table [value]="this.selectedQuoteTemplate?.gmcBasicDetails.gmcPolicyDetails">
              <ng-template pTemplate="header">
                <tr>
                  <th>Details</th>
                  <th>Count</th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-detail>
                <tr>
                  <td>{{ detail.name }}</td>
                  <td><input disabled type="number" pInputText [(ngModel)]="detail.inception">
                  </td>
                </tr>
              </ng-template>
            </p-table>
          </div>
        </p-card>
      </div>

      <div class="col-5">
        <!-- File Upload start-->
        <p-card>
          <div class="grid">
            <div class="col-8">
              <h3 style="font-size: medium; font-weight: bold;">Upload Attachments</h3>
            </div>
          </div>
          <div class="grid">
            <div class="col-12">
              <div class="col-8 text-left mt-1">
                <div class="ml-auto">
                  <input maxlength="255" pInputText id="basicDeatilsFileInput" autocomplete="off"
                    [(ngModel)]="basicDeatilsFileInput" name="basicDeatilsFileInput" type="text" placeholder="Type here"
                    class="p-inputtext1 text-left mt-1" (focusout)="onBasicDeatilsFileInputFocusOut()" />
                </div>
              </div>

              <div>
                <p-fileUpload #fileUploadBasicDeatils *ngIf="checkIfListOfBasicDeatilsFileUploadVisible()"
                  id="BasicDetails_Attachments_Upload" [auto]="true"
                  (onUpload)="this.onUploadBasicDetailsAttachmentUpload()" styleClass="upload-outline-light"
                  (onError)="this.errorHandler($event, fileUploadBasicDeatils)"
                  name="basic_details_qcr_files_upload_gmc" mode="advanced"
                  url="{{this.uploadbasicDeatilsAttachmentUrl}}" accept=".xls, .xlsx,application/pdf"
                  maxFileSize="1000000" chooseIcon="pi pi-paperclip" chooseLabel="Upload file"
                  [headers]="this.uploadHttpHeaders" method="post"></p-fileUpload>
              </div>
            </div>
          </div>
          <div class="grid">
            <div class="col-12">
              <div *ngIf="this.attachmentDetails?.length>0">
                <table>
                  <thead>
                    <tr>
                      <th style="text-align: center;">Description</th>
                      <th style="text-align: center;">File Name</th>
                      <th style="text-align: center;">Download</th>
                      <th style="text-align: center;">Delete</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let attachment of this.attachmentDetails">
                      <td>{{ attachment.attachmentType }}</td>
                      <td>{{ attachment.fileName }}</td>
                      <td style="text-align: center;">
                        <i class="pi pi-download" style="cursor: pointer; color: blue; font-size: 18px;"
                          (click)="downloadBasicDetailsDetailsfile(attachment.id)" title="Download"></i>
                      </td>
                      <td style="text-align: center;">
                        <i class="pi pi-trash" style="cursor: pointer; color: red; font-size: 18px;"
                          (click)="deleteBasicDetailsAttachmentsDetails(attachment.id)" title="Delete"></i>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </p-card>
      </div>


      <div class="col-6"
        *ngIf="(this.quote?.productId['type'].toLowerCase() != 'group health policy' && this.quote?.productId['type'].toLowerCase() != 'group health policy top up')">
        <p-card class="">
       
          <div class="inner-container">
            <div style="margin-top: 1px;">
              <p-checkbox name="showClaimHistory" id="showClaimHistory" value="showClaimHistory" [binary]="true"
                [(ngModel)]="selectedQuoteTemplate.showClaimHistory" inputId="showClaimHistory"></p-checkbox>
              &nbsp;&nbsp;<label class="form-label" for="ny" id="">Show Claim History?</label>
              <div *ngIf="selectedQuoteTemplate.showClaimHistory">
                <h4 class="mb-3">Claim Details</h4>
                <table class="p-table" border="1" cellspacing="0" cellpadding="5">
                  <thead>
                    <tr>
                      <th></th>
                      <th>Year 1</th>
                      <th>Year 2</th>
                      <th>Year 3</th>
                      <th>Year 4</th>
                      <th>Year 5</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let detail of selectedQuoteTemplate?.gpaGtlFormDetails">
                      <td>{{ detail.label }}</td>
                      <td><input pInputText [(ngModel)]="detail.data.year1"></td>
                      <td><input pInputText [(ngModel)]="detail.data.year2"></td>
                      <td><input pInputText [(ngModel)]="detail.data.year3"></td>
                      <td><input pInputText [(ngModel)]="detail.data.year4"></td>
                      <td><input pInputText [(ngModel)]="detail.data.year5"></td>
                    </tr>
                  </tbody>
                </table>
                <div style="margin-top: 2px;">
                  <label for="claimAsOnDate" class="form-label">Claim as on Date:</label>
                  <input type="date" pInputText id="claimAsOnDate"
                    [(ngModel)]="selectedQuoteTemplate?.gmcBasicDetails.claimAsOnDate">
                </div>
                <div style="margin-top: 3px;">
                  <label class="form-label">Existing Insurer:</label>
                  <input pInputText [(ngModel)]="this.selectedQuoteTemplate?.gmcBasicDetails.existingInsurer">
                </div>
                <div>
                  <label class="form-label">Existing Broker:</label>
                  <input pInputText [(ngModel)]="this.selectedQuoteTemplate?.gmcBasicDetails.existingBroker">
                </div>
              </div>
            </div>

          </div>
        </p-card>

      </div>



      <!-- <div class="col-4">
        <p-fileUpload #fileUpload *ngIf="!this.selectedQuoteTemplate.dayCareFilePath"
          id="territorycard_SubsidiaryAnnualReport_Upload" [auto]="true" (onUpload)="this.onUploadSDayCareFile()"
          styleClass="upload-outline-light" (onError)="this.errorHandler($event, fileUpload)" name="day_care_report"
          mode="advanced" url="{{this.uploadDaycareUrl}}" accept="application/pdf" maxFileSize="1000000"
          chooseIcon="pi pi-paperclip" chooseLabel="Upload Claim Report" [headers]="this.uploadHttpHeaders"
          method="post"></p-fileUpload>
        <div class="grid">
          <div class="col-12">
            <div *ngIf="subsidairyAttachment.length>0">
              <table>
                <thead>
                  <tr>
                    <th style="text-align: center;">File Name</th>
                    <th style="text-align: center;">View</th>
                    <th style="text-align: center;">Download</th>
                    <th style="text-align: center;">Delete</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let attachment of subsidairyAttachment">
                    <td>{{ attachment.fileName }}</td>
                    <td style="text-align: center;">
                      <i class="pi pi-eye" style="cursor: pointer; color: blue; font-size: 18px;"
                        (click)="this.downloadSubsidiaryauditedfinancialReport()" title="View"></i>
                    </td>
                    <td style="text-align: center;">
                      <i class="pi pi-download" style="cursor: pointer; color: blue; font-size: 18px;"
                        (click)="this.downloadFileSubsidiaryauditedfinancialReport()" title="Download"></i>
                    </td>
                    <td style="text-align: center;">
                      <i class="pi pi-trash" style="cursor: pointer; color: red; font-size: 18px;"
                        (click)="this.deleteDayCareReport()" title="Delete"></i>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div> -->



    </div>
    <div class="grid mt-1">
      <div class="col-5">
        <p-card
          *ngIf="this.quote?.productId['type'].toLowerCase() == 'group health policy' || this.quote?.productId['type'].toLowerCase() == 'group health policy top up'">
          <p-checkbox name="showClaimHistory" id="showClaimHistory" value="showClaimHistory" [binary]="true"
            [(ngModel)]="selectedQuoteTemplate.showClaimHistory" inputId="showClaimHistory"
            title="Show Claim History?"></p-checkbox>
          &nbsp;&nbsp;<label class="form-label" for="ny" id="">Show Claim History?</label>
          <div class="inner-container">
            <!-- app.component.html -->
            <div class="p-grid" *ngIf="selectedQuoteTemplate.showClaimHistory">
              <div class="p-col-6">
                <div>
                  <label class="form-label"> Policy Start Date:</label>
                  <input pInputText type="date" id="policyStartDate" class="input01"
                    [(ngModel)]="selectedQuoteTemplate.policyStartDate" />
                </div>
                <div>
                  <label class="form-label">Policy End Date:</label>
                  <input pInputText type="date" id="policyEndDate" class="input01"
                    [(ngModel)]="selectedQuoteTemplate.policyEndDate" />
                </div>
                <div>
                  <p-table [value]="this.selectedQuoteTemplate?.gmcBasicDetails.gmcPolicyDetails">
                    <ng-template pTemplate="header">
                      <tr>
                        <th>Details</th>
                        <th>Inception</th>
                        <th>As on Date</th>
                        <th>% Change</th>
                        <th>Proposed</th>
                      </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-detail>
                      <tr>
                        <td>{{ detail.name }}</td>
                        <td><input pInputText maxlength="11" pInputText [(ngModel)]="detail.inception" (keyup)="setChange(detail)">
                        </td>
                        <td><input type="number" pInputText [(ngModel)]="detail.asOnDate" (keyup)="setChange(detail)">
                        </td>
                        <td><input type="number" pInputText [(ngModel)]="detail.change" disabled></td>
                        <td><input type="number" pInputText [(ngModel)]="detail.proposed"></td>
                      </tr>
                    </ng-template>
                  </p-table>
                  <div class="mt-2">
                    <div class="mt-2">
                      <label class="form-label">No. of Days Lapsed in Policy:</label>
                      <input pInputText type="number" (keyup)="calculateAnualizedClaimAmount()"
                        [(ngModel)]="this.selectedQuoteTemplate?.gmcBasicDetails.policyRunDays">
                    </div>
                    <label class="form-label">Premium Paid at Inception (Excluding ST) - INR:</label>
                    <input pInputText maxlength="11" id="premiumAtInception" (keyup)="calculateEarnedPremium()"
                      [(ngModel)]="this.selectedQuoteTemplate?.gmcBasicDetails.premiumAtInception" currencyMask
                      [options]="{ prefix: '₹ ' , precision:0 }" placeholder="" class="input01">

                  </div>
                  <div class="mt-2">
                    <label class="form-label">Total Premium Paid as on date (Excluding ST) - INR:</label>
                    <input pInputText maxlength="11" id="premiumAtInception" (keyup)="calculateEarnedPremium()"
                      [(ngModel)]="this.selectedQuoteTemplate?.gmcBasicDetails.premiumAsOnDate" currencyMask
                      [options]="{ prefix: '₹ ' , precision:0 }" placeholder="" class="input01">
                  </div>
                  <div class="mt-2">
                    <label class="form-label">Earned Premium (excl. GST):</label>
                    <input pInputText maxlength="11" id="premiumAtInception"
                      [(ngModel)]="this.selectedQuoteTemplate?.gmcBasicDetails.earnedPremium" currencyMask
                      [options]="{ prefix: '₹ ' , precision:0 }" placeholder="" class="input01" disabled>
                  </div>
                </div>

                <!-- <div class="mt-2">
              <label class="form-label">Policy Run Date:</label>
              <input pInputText type="date" [(ngModel)]="this.selectedQuoteTemplate.gmcBasicDetails.policyRunDate">
            </div> -->

              </div>


            </div>
            <div *ngIf="this.quote.quoteType!='new'">
              <div>
                <label class="form-label">Existing Insurer:</label>
                <input pInputText [(ngModel)]="this.selectedQuoteTemplate?.gmcBasicDetails.existingInsurer">
              </div>
              <div>
                <label class="form-label">Existing TPA:</label>
                <input pInputText [(ngModel)]="this.selectedQuoteTemplate?.gmcBasicDetails.existingTPA">
              </div>
              <div>
                <label class="form-label">Existing Broker:</label>
                <input pInputText [(ngModel)]="this.selectedQuoteTemplate?.gmcBasicDetails.existingBroker">
              </div>
            </div>

          </div>
        </p-card>
      </div>
      <div class="col-5"
        *ngIf="this.quote?.productId['type'].toLowerCase() == 'group health policy' || this.quote?.productId['type'].toLowerCase() == 'group health policy top up'">
        <p-card class="" *ngIf="selectedQuoteTemplate.showClaimHistory">
          <h4 class="mb-6">Claim Details</h4>
          <div class="inner-container">
            <div class="p-col-6">
              <div style="margin-top: 20px;">
                <label for="claimAsOnDate" class="form-label">Claim as on Date:</label>
                <input type="date" pInputText id="claimAsOnDate"
                  [(ngModel)]="selectedQuoteTemplate?.gmcBasicDetails.claimAsOnDate">
              </div>
              <p-table [value]="this.selectedQuoteTemplate?.gmcBasicDetails?.gmcClaimDetails" class="mt-3">
                <ng-template pTemplate="header">
                  <tr>
                    <th></th>
                    <th>Count</th>
                    <th>Amount</th>
                  </tr>
                </ng-template>
                <ng-template pTemplate="body" let-claim>
                  <tr>
                    <td>{{ claim.name }}</td>
                    <td>
                      <input type="number" pInputText [(ngModel)]="claim.count" (keyup)="onKeyUp(rowIndex)"
                        [disabled]="claim.name === 'Incurred'">
                    </td>
                    <td> <input id="claimamount" pInputText [(ngModel)]="claim.amount" (keyup)="onKeyUp(rowIndex)"
                        currencyMask [options]="{ prefix: '₹ ' , precision:0 }" [disabled]="claim.name === 'Incurred'">
                    </td>
                  </tr>
                </ng-template>
              </p-table>
              <div class="mt-2">
                <label class="form-label">Annualized Claim Amount:</label>
                <input pInputText [(ngModel)]="this.selectedQuoteTemplate?.gmcBasicDetails.annualizedClaimAmount"
                  (change)="calcualteClaimratio()" readonly currencyMask [options]="{ prefix: '₹ ' , precision:0 }">
              </div>
              <div class="mt-2">
                <label class="form-label">Average Claim Amount:</label>
                <input pInputText id="averageClaimSize"
                  [(ngModel)]="this.selectedQuoteTemplate?.gmcBasicDetails.averageClaimSize" currencyMask
                  [options]="{ prefix: '₹ ' , precision:0 }" disabled>
              </div>
              <div class="mt-2">
                <label class="form-label">Claim Ratio on Earned Premium(ICR) %:</label>
                <input type="number" pInputText
                  [(ngModel)]="this.selectedQuoteTemplate?.gmcBasicDetails.claimRatioPremium" disabled>
              </div>
              <div class="mt-2">
                <label class="form-label">Claim Ratio on Total Premium:</label>
                <input type="number" pInputText
                  [(ngModel)]="this.selectedQuoteTemplate?.gmcBasicDetails.claimRatioTotalPremium">
              </div>

              <div class="mt-2">
                <label class="form-label">Co-Insure Details:</label>
                <input pInputText [(ngModel)]="this.selectedQuoteTemplate?.gmcBasicDetails.coInsureDetails">
              </div>
              <div class="mt-2">
                <label class="form-label">Co-Insure Percentage (%):</label>
                <input type="number" maxlength="3"
                  [(ngModel)]="this.selectedQuoteTemplate?.gmcBasicDetails.coInsurePercentage">
              </div>
            </div>

          </div>
        </p-card>

      </div>
    </div>

    <div class="col-4" *ngIf="quote.quoteType != 'new'">
      <p-card class="">
        <h4 class="mb-6">Insurer Details</h4>
        <div class="inner-container">
          <div class="grid mb-2">
            <div>
              <label class="form-label"> Policy Start Date:</label>
              <input pInputText type="date" id="policyStartDate" class="input01"
                [(ngModel)]="selectedQuoteTemplate.policyStartDate" />
            </div>
            <div>
              <label class="form-label">Policy End Date:</label>
              <input pInputText type="date" id="policyEndDate" class="input01"
                [(ngModel)]="selectedQuoteTemplate.policyEndDate" />
            </div>
            <div class="col-6" *ngIf="typeOfInsurerList.length > 0">
              <label for="" class="form-label" id="lblClientIndustry">Type of Insurer</label>

              <p-dropdown id="typeOfInsurers" class="custom-dropdown" [options]="typeOfInsurerList"
                placeholder="Select Insurer" optionLabel="label" optionValue="value"
                [(ngModel)]="employeeDemographic.typeOfInsurer" name="typeOfInsurers"
                #typeOfInsurers="ngModel"></p-dropdown>


              <button *ngIf="!employeeDemographic.istypeOfInsurerDescription" pButton type="button"
                label="Add more info" class="p-button-link"
                (click)="employeeDemographic.istypeOfInsurerDescription = !employeeDemographic.istypeOfInsurerDescription"></button>
            </div>
            <div class="col-6" *ngIf="employeeDemographic.istypeOfInsurerDescription">
              <label for="" class="form-label" id="lblDescription">Description</label>
              <textarea maxlength="255" pInputText [(ngModel)]="this.employeeDemographic.typeOfInsurerDescription"
                id="typeOfInsurerDescription" #typeOfInsurerDescription="ngModel" name="ngModel" type="text"
                class="p-inputtext1 text-left"></textarea>
              <button pButton type="button" label="Remove" class="p-button-link btn-danger"
                (click)="employeeDemographic.istypeOfInsurerDescription = !employeeDemographic.istypeOfInsurerDescription"></button>
            </div>

            <div class="col-6" *ngIf="optionsInsurers.length > 0">
              <label for="" class="form-label" id="lblDescription">Name of Lead Insurer
              </label>

              <p-dropdown id="nameOfLeadInsurers" class="custom-dropdown" [options]="optionsInsurers"
                placeholder="Select Insurer" optionLabel="label" optionValue="label"
                [(ngModel)]="employeeDemographic.nameOfLeadInsurer" name="nameOfLeadInsurers"
                #nameOfLeadInsurers="ngModel"></p-dropdown>

              <button *ngIf="!employeeDemographic.istypeOfInsurerDescription" pButton type="button"
                label="Add more info" class="p-button-link"
                (click)="employeeDemographic.isnameOfLeadInsurerDescription = !employeeDemographic.isnameOfLeadInsurerDescription"></button>
            </div>
            <div class="col-6" *ngIf="employeeDemographic.isnameOfLeadInsurerDescription">
              <label for="" class="form-label" id="lblDescription">Name of Insurer Description</label>
              <textarea maxlength="255" pInputText [(ngModel)]="this.employeeDemographic.nameOfLeadInsurerDescription"
                id="nameOfLeadInsurerDescription" #nameOfLeadInsurerDescription="ngModel" name="ngModel" type="text"
                class="p-inputtext1 text-left"></textarea>
              <button pButton type="button" label="Remove" class="p-button-link btn-danger"
                (click)="employeeDemographic.isnameOfLeadInsurerDescription = !employeeDemographic.isnameOfLeadInsurerDescription"></button>
            </div>
          </div>
          <div class="grid mb-2">
            <div class="col-6">
              <label for="" class="form-label" id="leadSharePercentageLbl">Lead Share Percentage</label>
              <!-- <input min="0" maxlength="20" type="number" pInputText maxlength="100" id="leadSharePercentage"
                    [(ngModel)]="this.employeeDemographic.leadSharePercentage" #leadSharePercentage="ngModel"
                    name="leadSharePercentage" class="p-inputtext1 text-right" /> -->

              <p-inputNumber class="text-right" id="leadSharePercentage" placeholder="0"
                [(ngModel)]="this.employeeDemographic.leadSharePercentage" #leadSharePercentage="ngModel"
                name="leadSharePercentage" [maxlength]="3" [min]="0" (keyup)="showBoxDiv()"></p-inputNumber>
            </div>
          </div>
          <div class="insurerborder" *ngIf="this.employeeDemographic.leadSharePercentage != 100">
            <div class="grid mb-2">
              <div class="col-6">
                <label for="" class="form-label" id="coInsurer1Lbl">Name Of Co-Insurer</label>
                <p-dropdown id="coInsurer1" class="custom-dropdown" [options]="optionsInsurers"
                  placeholder="Select Insurer" optionLabel="label" optionValue="label"
                  [(ngModel)]="employeeDemographic.coInsurer1" name="coInsurer1" #coInsurer1="ngModel"></p-dropdown>

              </div>
              <div class="col-6">
                <label for="" class="form-label" id="coInsurer1Percentagelbl">Co-Insurer Share Percentage</label>
                <p-inputNumber class="text-right" id="coInsurer1Percentage" placeholder="0"
                  [(ngModel)]="this.employeeDemographic.coInsurer1Percentage" #coInsurer1Percentage="ngModel"
                  name="coInsurer1Percentage" [maxlength]="3" [min]="0"></p-inputNumber>
              </div>

            </div>
            <div class="grid mb-2">
              <div class="col-6">
                <label for="" class="form-label" id="coInsurer2lbl">Name Of Co-Insurer</label>
                <p-dropdown id="coInsurer2" class="custom-dropdown" [options]="optionsInsurers"
                  placeholder="Select Insurer" optionLabel="label" optionValue="label"
                  [(ngModel)]="employeeDemographic.coInsurer2" name="coInsurer2" #coInsurer2="ngModel"></p-dropdown>
              </div>
              <div class="col-6">
                <label for="" class="form-label" id="coInsurer2Percentagelbl">Co-Insurer Share Percentage</label>
                <p-inputNumber class="text-right" id="coInsurer2Percentage" placeholder="0"
                  [(ngModel)]="this.employeeDemographic.coInsurer2Percentage" #coInsurer2Percentage="ngModel"
                  name="coInsurer2Percentage" [maxlength]="3" [min]="0"></p-inputNumber>
              </div>

            </div>
          </div>
          <div class="grid mb-2 mt-3">
            <div class="col-6">
              <label for="" class="form-label" id="otherDetails_Deductibles_MBLOP">Current TPA</label>
              <p-dropdown id="currentTpa" class="custom-dropdown" [options]="tpaLists" placeholder="Select Insurer"
                optionLabel="label" optionValue="label" [(ngModel)]="employeeDemographic.currentTpa" name="currentTpa"
                #coInsurer2="ngModel"></p-dropdown>

            </div>
            <div class="col-6">
              <label for="" class="form-label" id="otherDetails_Brokerage">Add More TPA</label>
              <p-dropdown placeholder="Select TPA" [options]="this.tpaLists" dropdown="false" [(ngModel)]="this.moreTpa"
                id="tpaListsMore" #tpaListsMore="ngModel" name="ngModel" optionLabel="label" optionvalue="label"
                class="custom-dropdown">
              </p-dropdown>
              <button pButton type="button" label="Add" class="p-button-link btn-info" (click)="addTpa()"></button>

              <div *ngIf="employeeDemographic.otherTPA.length>0">
                <label><b>Other TPAs</b></label>
                <table class="table table-bordered" style="width: 100%;">
                  <tr *ngFor="let item of employeeDemographic.otherTPA;">
                    <td>{{item.label}}</td>
                    <td (click)="removeTpa(item)"><i [class]="'pi pi-times'"></i></td>
                  </tr>
                </table>
              </div>
            </div>
          </div>

        </div>
      </p-card>
    </div>
  </div>

</div>