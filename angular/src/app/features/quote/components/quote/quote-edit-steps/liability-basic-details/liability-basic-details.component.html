<div class="px-5 pb-3">
    <div class=" tblz01-pdf md-4">

        <p-card>
            <div style="text-align: left;">
                <!-- <button class="btn btn-lg btn btn-success" type="button" id="requisitionTab_EditOptions"
                    (click)="save()">Save</button> -->
            </div>
            <table class="static-table" style="margin-top: 20px; margin-bottom: 20px; width: 100%;" cellpadding="10"
                cellspacing="0">
                <tr style="background-color:#0048bc; color: white !important;">
                    <td colspan="3" class="text-black" id="DandOSubTemplate_BasicDetails">
                        <h4 style="color: white;">Basic Details</h4>
                    </td>
                </tr>
                <tr>
                    <td class="col-6">
                        <p><i class="pi pi-circle-on" style="font-size: 5px"></i> Details of Business Activity</p>
                    </td>
                    <td class="col-4">
                        {{this.quoteDandOOptions?.detailsOfBusinessActivity}}
                    </td>
                    <!-- <td class="col-4" *ngIf="showEditOption">
                        <input pInputText type="text" placeholder="Details of Bussiness Activity"
                            [(ngModel)]="this.quoteDandOOptions.detailsOfBusinessActivity"
                            #detailsOfBusinessActivity="ngModel" id="detailsOfBusinessActivity"
                            name="detailsOfBusinessActivity" />
                    </td> -->
                </tr>
                <!-- <tr>
                    <td class="col-6">
                        <p><i class="pi pi-circle-on" style="font-size: 5px"></i> Type of Policy</p>
                    </td>
                    <td class="col-4">
                        {{this.quoteDandOOptions.typeOfPolicyId['lovKey']}}
                    </td>
                    <td class="col-4" *ngIf="this.optionsTypeOfPolicy.length > 0 && showEditOption">
                        <p-dropdown class="form-control" [options]="this.optionsTypeOfPolicy" placeholder="Select"
                            optionLabel="label" optionValue="value" [(ngModel)]="this.quoteDandOOptions.typeOfPolicyId"
                            #typeOfPolicyId="ngModel" id="typeOfPolicyId" name="typeOfPolicyId"
                            appendTo="body"></p-dropdown>
                    </td>
                </tr> -->
                <!-- <tr *ngIf="[AllowedProductTemplate.LIABILITY].includes(this.quote?.productId['productTemplate'])">
                    <td class="col-6">
                        <p><i class="pi pi-circle-on" style="font-size: 5px"></i> Years of Experience</p>
                    </td>
                    <td class="col-4">
                        {{this.quoteDandOOptions.ageOfCompanyId['lovKey']}}
                    </td>
                    <td class="col-4" *ngIf="showEditOption">
                        <p-dropdown class="form-control" [options]="this.optionsAgeOfCompany" placeholder="Select"
                            optionLabel="label" optionValue="value" [(ngModel)]="this.quoteDandOOptions.ageOfCompanyId"
                            #ageOfCompanyId="ngModel" id="ageOfCompanyId" name="ageOfCompanyId"
                            appendTo="body"></p-dropdown>
                    </td>
                </tr> -->
                <tr>
                    <td class="col-6">
                        <p><i class="pi pi-circle-on" style="font-size: 5px"></i> Retroactive Details</p>
                    </td>
                    <td class="col-4">
                        {{this.quoteDandOOptions.retroactiveCoverId['lovKey']}}
                    </td>
                    <!-- <td class="col-4" *ngIf="showEditOption">
                        <p-dropdown class="form-control" [options]="this.optionsRetroactiveCover" placeholder="Select"
                            optionLabel="label" optionValue="value"
                            [(ngModel)]="this.quoteDandOOptions.retroactiveCoverId" #retroactiveCoverId="ngModel"
                            id="retroactiveCoverId" name="retroactiveCoverId" appendTo="body"></p-dropdown>
                    </td> -->
                </tr>
                <tr>
                    <td class="col-6">
                        <p><i class="pi pi-circle-on" style="font-size: 5px"></i> Retroactive Date</p>
                    </td>
                    <td class="col-4">
                        {{quoteDandOOptions.dateOfIncorporation | date:'dd/MM/yyyy'}}
                    </td>
                    <!-- <td class="col-4" *ngIf="showEditOption">
                        <p-calendar id="dateOfIncorporation" aria-placeholder="Select Date"
                            [(ngModel)]="quoteDandOOptions.dateOfIncorporation" [showIcon]="true"
                            name="dateOfIncorporation" #dateOfIncorporation="ngModel" class="text-left"></p-calendar>
                    </td> -->
                </tr>
                <!-- <tr *ngIf="[AllowedProductTemplate.LIABILITY].includes(this.quote?.productId['productTemplate'])">
                    <td class="col-6">
                        <p><i class="pi pi-circle-on" style="font-size: 5px"></i> AOA:AOY</p>
                    </td>
                    <td class="col-4">
                        {{this.quoteDandOOptions.aoaAoyId['lovKey']}}
                    </td>
                    <td class="col-4" *ngIf="showEditOption">
                        <p-dropdown class="form-control" [options]="this.optionsAoaAoy" placeholder="Select Type"
                            optionLabel="label" optionValue="value" [(ngModel)]="this.quoteDandOOptions.aoaAoyId"
                            #aoaAoyId="ngModel" id="aoaAoyId" name="aoaAoyId" appendTo="body"
                            (onChange)="onDropdownAOAChange($event)"></p-dropdown>
                    </td>
                </tr> -->
                <tr *ngIf="[AllowedProductTemplate.LIABILITY].includes(this.quote?.productId['productTemplate'])">
                    <td class="col-6">
                        <p><i class="pi pi-circle-on" style="font-size: 5px"></i> Limit of Liability</p>
                    </td>
                    <td colspan="2" class="col-6 text-right">
                        <app-currency-dollar-repee [maximumFractionDigits]="0" [rate]="this.quote?.dollarRate"
                            [selectedCurrencyDollar]="this.quote?.selectedCurrency=='$ Dollar'"
                            [value]='this.quoteDandOOptions?.limitOfLiability ?? 0'></app-currency-dollar-repee>
                    </td>
                </tr>
                <!-- <tr *ngIf="[AllowedProductTemplate.LIABILITY].includes(this.quote?.productId['productTemplate'])">
                    <td class="col-6">
                        <p><i class="pi pi-circle-on" style="font-size: 5px"></i> Any One Accident/Loss</p>
                    </td>
                    <td colspan="2" class="col-6 text-right">
                        <app-currency-dollar-repee [maximumFractionDigits]="0" [rate]="this.quote?.dollarRate"
                            [selectedCurrencyDollar]="this.quote?.selectedCurrency=='$ Dollar'"
                            [value]='this.quoteDandOOptions?.anyOneAccident ?? 0'></app-currency-dollar-repee>
                    </td>
                </tr>
                <tr *ngIf="[AllowedProductTemplate.LIABILITY].includes(this.quote?.productId['productTemplate'])">
                    <td class="col-6">
                        <p><i class="pi pi-circle-on" style="font-size: 5px"></i> In The Aggregate</p>
                    </td>
                    <td colspan="2" class="col-6 text-right">
                        <app-currency-dollar-repee [maximumFractionDigits]="0" [rate]="this.quote?.dollarRate"
                            [selectedCurrencyDollar]="this.quote?.selectedCurrency=='$ Dollar'"
                            [value]='this.quoteDandOOptions?.inTheAggregate ?? 0'></app-currency-dollar-repee>
                    </td>
                </tr> -->
                <tr *ngIf="[AllowedProductTemplate.LIABILITY_CRIME].includes(this.quote?.productId['productTemplate'])">

                    <td class="col-6">
                        <p><i class="pi pi-circle-on" style="font-size: 5px"></i> Total number of Employees</p>
                    </td>
                    <td colspan="2" class="col-6 text-right">
                        {{this.quoteDandOOptions.totalNumberOfEmployees}}
                    </td>
                </tr>

                <tr *ngIf="[AllowedProductTemplate.LIABILITY_CRIME].includes(this.quote?.productId['productTemplate'])">
                    <td class="col-8" colspan="2">
                        <p-table [value]="employeesDetails" responsiveLayout="scroll" dataKey="id"
                            styleClass="p-datatable-gridlines p-datatable-striped quoteSlip" responsiveLayout="scroll">
                            <ng-template pTemplate="caption">
                                <h4 class="text-center text-black" id="WCPSubTemplate_EmployementDetails_Header">
                                    Employees Details</h4>
                            </ng-template>
                            <ng-template pTemplate="header">
                <tr>
                    <th class="tableBorder" class="text-center text-black">
                        Country Name
                    </th>
                    <!-- <th class="tableBorder" class="text-center text-black">
                        Location Name
                    </th> -->
                    <th class="tableBorder" class="text-center text-black">
                        Number of Employees
                    </th>
                </tr>
                </ng-template>
                <ng-template pTemplate="body" let-items>
                    <tr class="no-border">
                        <td id="wcRates_natureOfWork" class="text-center  text-left"> {{items.countryName }}
                        </td>
                        <!-- <td id="wcRates_typeOfEmployees" class="text-center  text-left"> {{items.location}}
                        </td> -->
                        <td id="wcRates_typeOfEmployees" class="text-center  text-right"> {{items.numberOfEmployees
                            }}</td>
                    </tr>
                </ng-template>
                </p-table>
                </td>
                </tr>
                <tr *ngIf="showEditOption">
                    <td class="col-6">
                        <p><i class="pi pi-circle-on" style="font-size: 5px"></i> Additional Information: </p>
                    </td>
                    <td class="col-4">
                        <textarea pInputText id="additionalInformation"
                            [(ngModel)]="this.quoteDandOOptions.additionalInformation" name="description"
                            #additionalInformation="ngModel" type="text" class="p-inputtext1 text-left"></textarea>
                    </td>
                </tr>
            </table>
            <div class="button-container" style="margin-top: 25px;" *ngIf="showEditOption">
                <button class="btn btn-lg btn btn-success" type="button" id="requisitionTab_EditOptions"
                    (click)="save()">Save</button>
            </div>
        </p-card>


        <p-card *ngIf="!showEditOption">
            <!-- Broker Attachments Section -->
            <table class="static-table" cellpadding="0" cellspacing="0">
                <tr style="background-color:#0048bc; color: white !important;">
                    <td class="text-black" id="basicDetails_uploadedAttachments">
                        <h4 style="color: white;">Uploaded Attachments</h4>
                    </td>
                </tr>
                <div class="grid">
                    <div class="col-12">
                        <div *ngIf="quoteDandOOptions.basicDetailsAttchments.length > 0">
                            <table>
                                <thead>
                                    <tr>
                                        <th style="text-align: center;">Attachment Type</th>
                                        <th style="text-align: center;">File Name</th>
                                        <th style="text-align: center;">View</th>
                                        <th style="text-align: center;">Download</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let attachment of quoteDandOOptions.basicDetailsAttchments">
                                        <td>{{ attachment.attachmentSubType + ' - ' + attachment.attachmentType }}</td>
                                        <td>{{ attachment.fileName }}</td>
                                        <td style="text-align: center;">
                                            <i class="pi pi-eye" style="cursor: pointer; color: blue; font-size: 18px;"
                                                (click)="downloadBasicDetailsAttachmentsDetails(attachment.id)"
                                                title="View"></i>
                                        </td>
                                        <td style="text-align: center;">
                                            <i class="pi pi-download"
                                                style="cursor: pointer; color: blue; font-size: 18px;"
                                                (click)="downloadBasicDetailsAttachmentsDetailsfile(attachment.id)"
                                                title="Download"></i>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div *ngIf="quoteDandOOptions.basicDetailsAttchments.length == 0">
                            <h6 style="font-size: small; font-weight: bold;">No documents uploaded</h6>
                        </div>
                    </div>
                </div>
            </table>
        </p-card>

        <p-card *ngIf="showEditOption">
            <div class="grid">
                <div class="col-8">
                    <h3 style="font-size: medium; font-weight: bold;">Upload Underwriter Attachments</h3>
                </div>
            </div>
            <!-- <h4 class="mb-2" id="basicdetails_uploadAttachments">Upload Attachments</h4> -->
            <div class="grid">
                <div class="col-12">
                    <p-dropdown class="form-control"
                        [options]="template == 'LIABILITY_CRIME' ? this.cgloptionAttachmentTypes : this.optionAttachmentTypes"
                        placeholder="Select Type" optionLabel="label" optionValue="value"
                        [(ngModel)]="selectedAttachment" #uploadAttachmentddl="ngModel" id="uploadAttachmentddl"
                        name="uploadAttachmentddl" appendTo="body" (onChange)="onAttachmentTypeChange($event)"></p-dropdown>


                    <div class="col-8 text-left mt-1" *ngIf="selectedAttachment=='Others'">
                        <div class="ml-auto">
                            <input maxlength="255" pInputText id="attachemntTypeOther" autocomplete="off"
                                [(ngModel)]="attachemntTypeOther" name="attachemntTypeOther" type="text"
                                placeholder="Type here" class="p-inputtext1 text-left mt-1"
                                (focusout)="onOtherAttachmentInputFocusOut()" />
                        </div>
                    </div>

                    <div>
                        <p-fileUpload #fileUpload *ngIf="checkIfFileUploadVisible()"
                            id="basicDeatilscard_Attachments_Upload" [auto]="true"
                            (onUpload)="this.onUploadBasicDetailsAttachmentUpload()" styleClass="upload-outline-light"
                            (onError)="this.errorHandler($event, fileUpload)" name="basic_deatils_files_upload"
                            mode="advanced" url="{{this.uploadbasicDetailsAttachmentUrl}}" accept="application/pdf"
                            maxFileSize="10000000" chooseIcon="pi pi-paperclip" chooseLabel="Upload Attachment"
                            [headers]="this.uploadHttpHeaders" method="post"></p-fileUpload>
                    </div>


                </div>

            </div>
            <div class="grid">
                <div class="col-12">
                    <div *ngIf="quoteDandOOptions.basicDetailsAttchments.length>0">
                        <table>
                            <thead>
                                <tr>
                                    <th style="text-align: center;">Attachment Type</th>
                                    <th style="text-align: center;">File Name</th>
                                    <th style="text-align: center;">View</th>
                                    <th style="text-align: center;">Download</th>
                                    <th style="text-align: center;">Delete</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let attachment of quoteDandOOptions.basicDetailsAttchments">
                                    <td>{{ attachment.attachmentSubType + ' - ' +
                                        attachment.attachmentType }}</td>
                                    <td>{{ attachment.fileName }}</td>
                                    <td style="text-align: center;">
                                        <i class="pi pi-eye" style="cursor: pointer; color: blue; font-size: 18px;"
                                            (click)="downloadBasicDetailsAttachmentsDetails(attachment.id)"
                                            title="View"></i>
                                    </td>
                                    <td style="text-align: center;">
                                        <i class="pi pi-download" style="cursor: pointer; color: blue; font-size: 18px;"
                                            (click)="downloadBasicDetailsAttachmentsDetailsfile(attachment.id)"
                                            title="Download"></i>
                                    </td>
                                    <td style="text-align: center;">
                                        <i class="pi pi-trash" style="cursor: pointer; color: red; font-size: 18px;"
                                            (click)="deleteBasicDetailsAttachmentsDetails(attachment.id)"
                                            title="Delete"></i>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </p-card>

        <p-card>
            <table class="static-table" cellpadding="0" cellspacing="0">
                <tr style="background-color:#0048bc; color: white !important;">
                    <td class="text-black" id="DandOSubTemplate_Details">
                        <h4 style="color: white;"> Add-Ons Covers</h4>
                    </td>
                </tr>
            </table>
            <div style="text-align: right;" *ngIf="showEditOption">
                <button class="btn btn-lg btn btn-success" type="button" id="requisitionTab_EditOptions"
                    (click)="openFlexaCoversDialog()" style="margin-top: 15px; margin-bottom: 15px;">Edit
                    Coverages</button>
            </div>
            <p-table [value]="liabiltyCovers" responsiveLayout="scroll" dataKey="id"
                styleClass="p-datatable-gridlines p-datatable-striped quoteSlip" responsiveLayout="scroll">
                <ng-template pTemplate="caption">
                    <h4 class="text-center text-black" id="WCPSubTemplate_EmployementDetails_Header">
                        Add-Ons Covers
                    </h4>
                </ng-template>
                <ng-template pTemplate="header">
                    <tr>
                        <th class="tableBorder" class="text-center text-black">
                            Covers Name
                        </th>
                        <th class="tableBorder" class="text-center text-black">
                            Covered/Not Covered
                        </th>
                        <th class="tableBorder" class="text-center text-black">
                            Activity Name
                        </th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-rowData>
                    <tr style="border-top: 1px solid #dee2e6;">
                        <td style="width: 40%;" id="conditionalFreeAddOnDialog_CoverIdName">
                            {{rowData?.name}}
                        </td>
                        <td id="conditionalFreeAddOnDialog_FreeUpToText">
                            {{rowData.optionSelected}}
                        </td>
                        <td id="conditionalFreeAddOnDialog_FreeUpToText">
                            {{rowData.description}}
                        </td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage" let-columns>
                    <tr>
                        <td [attr.colspan]="5" id="wcSubTemplate_NoRecordsFoundMSG">
                            No AddOn Covers were selected
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </p-card>
    </div>
</div>