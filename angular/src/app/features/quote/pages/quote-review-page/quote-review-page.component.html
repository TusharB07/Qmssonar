<div *ngIf="!isMobile">
    <section class="main-container review-quote-details" *ngIf="this.quote">
        <div class="wrapper">
            <div class="content-wrapper custom-style">
                <div class="top-head-details">
                    <div class="grid px-3 align-items-center">

                        <div class="col-4">
                            <div class="flex align-items-center" data-aos="fade-right">
                                <!-- <a *ngIf="!this.isProposalVerified" class="btn-outline-blue mr-5 px-3 py-1" pbutton routerLink="../" id="RequisitionReview_goToBack"><i class="pi pi-chevron-left"></i> Back</a>
                                <h2 class="m-0" id="RequisitionReview_Header"> Review Quote Details <span *ngIf="this.isProposalVerified"> - Proposal Verified</span></h2> -->
                                <a *ngIf="!this.isProposalVerified" class="btn-outline-blue mr-5 px-3 py-1" pbutton
                                    routerLink="../" id="RequisitionReview_goToBack"><i class="pi pi-chevron-left"></i>
                                    Back</a>
                                <h2 class="m-0" id="RequisitionReview_Header"> Review {{(quote.otcType == 'NONOTC' &&
                                    isQuoteslipAllowedUser) ? 'Premium':'Quote'}} Details <span
                                        *ngIf="this.isProposalVerified"> - Proposal Verified</span></h2>
                            </div>
                        </div>

                        <!-- New_Quote_Option -->
                        <div class="col-1 text-left align-items-center">
                            <div class="mr-1">
                                <p-dropdown *ngIf="this.selectedQuoteOptionOfProperty"
                                    [(ngModel)]="this.selectedQuoteOptionOfProperty"
                                    [options]="this.allQuoteOptionDropdown"
                                    (ngModelChange)="this.onChangeQuoteOption($event)">
                                </p-dropdown>
                            </div>

                            <div class="mr-1" *ngIf="showDDls || isAllowedProductLiability()">
                                <div>
                                    <label class="form-label">Select Option</label>
                                    <p-dropdown 
                                    [filter]="true" 
                                    [filterBy]="'label'" 
                                    id="requisitionTab_handleOptions"
                                    [(ngModel)]="selectedQuoteOptionName"
                                    (onChange)="handleQuoteOptionChange($event)" 
                                    class="custom-dropdown"
                                    [options]="optionsQuoteOptions" 
                                    field="label">
                                </p-dropdown>
                                </div>
                            </div>  
                            <div *ngIf="isAllowedProductLiability()" class="mr-3">
                                <button class="btn btn-lg btn btn-primary" type="button" id="requisitionTab_createOptions"
                                    (click)="compareLiabilityQuoteOptionsDialog()" style="font-size: 1.2rem">Compare Options</button>
                            </div>                         
                        </div>
                        <!-- New_Quote_Option -->
                        <div class="col-2 text-left align-items-center">
                            <label *ngIf="showDDls" class="form-label">Select Options</label>
                            <p-multiSelect *ngIf="showDDls" placeholder="No Options Selected" [resetFilterOnHide]="true"
                                id="QuoteReviewPage_selectOptions" name="QuoteReviewPage_selectOptions"
                                [(ngModel)]="this.selectedOptions" pInputText #name="ngModel"
                                [options]="this.optionsQuoteOptions" optionLabel="label">
                                <ng-template pTemplate="empty">
                                    No Options Found
                                </ng-template>
                            </p-multiSelect>

                        </div>
                        <div class="col-1 text-left align-items-center">
                            <button *ngIf="showDDls" class="mt-3 btn btn-sm btn btn-primary" type="button"
                                id="requisitionTab_createOptions" (click)="compareGmcQuoteOptionsDialog()"
                                style="font-size: 1.2rem">Compare</button>
                        </div>
                        <div class="" *ngIf="this.quote?.allCoversArray">
                            <div [hidden]="true" *ngIf="this.quote"
                                style="background-color: transparent !important;margin-top: 50px;"
                                id="QuoteSlipPDFPreview" #QuoteSlipPDFPreview>
                                <app-quote-slip-template-one [quote]="this.quote" id="QuoteSlipPDFview" [selectedQuoteOption]="this.selectedQuoteOption" 
                                    #QuoteSlipPDFview></app-quote-slip-template-one>
                            </div>
                        </div>

                        <!-- <div class="col-4 text-right align-items-center" data-aos="fade-left">
                            <a target="_blank" [href]="'/backend/quotes/' + this.id + '/pdf-preview'" class="btn-sm btn btn-outline-success mr-2"><i class="pi pi-print"></i> Print</a>
                            <span class="" *ngIf="(this.isSendToInsurer || this.isOtc) && !(this.quote.otpVerifiedAt || this.quote.offlineVerificationFormUrl) ">
   
                                <button *ngIf="this.showProposal" (click)="this.openVerificatioModeDialog() ;this.hideProposal()" class="btn btn-outline-primary mr-2"> Verify Proposal</button>
                            </span>
   
                            <button *ngIf="this.isSendForApproval" class="btn btn-lg btn-primary mr-2" type="button" (click)="sendQuoteForApproval()">Send for approval</button>
                            <button *ngIf="this.isSendToInsurer" [disabled]="!(this.optionsInsurer?.length > 0 && this.selectedRMEmails.length > 0 && (this.quote.otpVerifiedAt || this.quote.offlineVerificationFormUrl))" class="btn btn-lg btn-primary mr-2" type="button" (click)="sendQuoteToInsuranceCompanyRm()">Send to Insurers</button>
                            <button *ngIf="this.isOtc" [disabled]="!(this.quote.otpVerifiedAt || this.quote.offlineVerificationFormUrl)" class="btn btn-lg btn-primary mr-2" type="button" (click)="sendQuoteToInsuranceCompanyRmForOtcProduct()">Generate Proposal</button>
                        </div> -->
                        <div class="col-4 text-right align-items-center">
                            <!-- <a target="_self" [href]="'/backend/quotes/' + this.quote._id + '/pdf-preview'"
                                id="RequisitionReview_PrintQuoteSlip" class="btn-sm btn btn-outline-success mr-2"><i
                                    class="pi pi-print"></i> Print</a> -->

                            <!-- <a target="_self" (click)="generatePDF()" id="RequisitionReview_PrintQuoteSlip"
                                class="btn-sm btn btn-outline-success mr-2"><i class="pi pi-print"></i> Print</a> -->

                            <!-- <button
                            pButton label="Download Excel" class="btn p-button-outlined mr-2" icon="pi pi-download"
                            (click)="this.bulkImportGenerateSample()"></button> -->
                            <span class="" *ngIf="this.isSendToInsurer">
                                <!-- <button *ngIf="!this.isProposalVerified" (click)="this.openVerificatioModeDialog()" id="RequisitionReview_verify_proposal" class="btn btn-outline-primary mr-2">Verify Proposal</button> -->
                                <button *ngIf="!this.isOtc"
                                    [disabled]="!this.mappedIcNames || this.mappedIcNames?.length == 0"
                                    class="btn btn-lg btn-primary mr-2" id="RequisitionReview_SendToInsurer"
                                    type="button" (click)="sendQuoteToInsuranceCompanyRm()">Send to
                                    Insurers
                                </button>
                                <!-- show when user create quote option version -->
                                <!-- <button *ngIf="this.quoteOption?.hasOwnProperty('qcrVersion')"
                                    [disabled]="!this.mappedIcNames || this.mappedIcNames?.length == 0"
                                    class="btn btn-lg btn-success mr-2" id="RequisitionReview_SendToInsurer"
                                    type="button"
                                    (click)="generatePlacementQuoteOptionSlip(this.quoteOption._id)">Generate Placement

                                </button> -->
                                <button *ngIf="this.isOtc" class="btn btn-lg btn-primary mr-2"
                                    id="RequisitionReview_GenerateProposal" type="button"
                                    (click)="sendQuoteToInsuranceCompanyRmForOtcProduct()">Generate
                                    Proposal
                                </button>
                            </span>
                            <button *ngIf="this.user.roleId['name'] != 'sales_approver' && this.isSendForApproval"
                            class="btn btn-lg btn-primary mr-2"
                            type="button"
                            id="RequisitionReview_SendForApproval"
                            (click)="sendQuoteForApproval()">
                        Send for approval
                    </button>
                    
                    <!-- Send for Placement Button (Visible only for 'sales_approver') -->
                    <button *ngIf="this.user.roleId['name'] == 'sales_approver' && this.isSendForApproval"
                            class="btn btn-lg btn-primary mr-2"
                            type="button"
                            id="RequisitionReview_SendForPlacement"
                            (click)="sendQuoteForPlacement()">
                        Send for placement
                    </button>
                        </div>
                    </div>

                </div>
                <div class="content-details-tabs">
                    <div class="grid px-3">
                        <div class="col mt-5 pr-4" id="left-bar">
                            <div class="" *ngIf="this.quote?.allCoversArray">
                                <app-quote-slip-template-one id="RequisitionReview_QuoteSlip_TemplateOne"
                                [selectedQuoteOption]="this.selectedQuoteOption" [quoteOption]="this.quoteOption" [quote]="this.quote"></app-quote-slip-template-one>
                                <!-- <app-quote-slip-template-for-fire *ngIf="this.quote?.productId?.shortName == 'FIPR'" [quote]="this.quote"></app-quote-slip-template-for-fire> -->
                            </div>
                        </div>
                        <div class="col-4 mt-4 pl-4" id="right-bar" *ngIf="this.isSendToInsurer && !this.isOtc">
                            <app-select-insurer [quote]="this.quote" [quoteOption]="this.quoteOption"
                                (mappedIcNamesChange)="this.mappedIcNamesChange($event)" [gmcQuoteOption]="this.selectedQuoteOption"></app-select-insurer>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
<div *ngIf="isMobile">
    <section class="main-container review-quote-details" *ngIf="this.quote">
        <div class="wrapper">
            <div class="content-wrapper custom-style">
                <div class="top-head-details">
                    <div class="grid align-items-center">
                        <div>
                            <div class="flex align-items-center mb-4">
                                <a *ngIf="!this.isProposalVerified" class="btn-outline-blue mr-5 px-3 py-1" pbutton
                                    routerLink="../" id="RequisitionReview_goToBack"><i class="pi pi-chevron-left"></i>
                                    Back</a>
                                <h2 class="m-0" id="RequisitionReview_Header"> Review Quote Details <span
                                        *ngIf="this.isProposalVerified"> - Proposal Verified</span></h2>
                            </div>
                        </div>
                        <div class="text-right flex justify-content-end align-items-center w-full">
                            <a target="_self" [href]="'/backend/quotes/' + this.quote._id + '/pdf-preview'"
                                id="RequisitionReview_PrintQuoteSlip" class="btn-sm btn btn-outline-success mr-2"><i
                                    class="pi pi-print"></i>
                                Print</a>
                            <span class="" *ngIf="this.isSendToInsurer">
                                <button *ngIf="!this.isOtc"
                                    [disabled]="!this.mappedIcNames || this.mappedIcNames?.length == 0"
                                    class="btn btn-lg btn-primary mr-2" id="RequisitionReview_SendToInsurer"
                                    type="button" (click)="sendQuoteToInsuranceCompanyRm()">Send to Insurers</button>
                                <button *ngIf="this.isOtc" class="btn btn-lg btn-primary mr-2"
                                    id="RequisitionReview_GenerateProposal" type="button"
                                    (click)="sendQuoteToInsuranceCompanyRmForOtcProduct()">Generate Proposal</button>
                            </span>
                            <button *ngIf="this.isSendForApproval" class="btn btn-lg btn-primary mr-2" type="button"
                                id="RequisitionReview_SendForApproval" (click)="sendQuoteForApproval()">Send for
                                approval</button>
                        </div>
                    </div>
                </div>
                <div class="content-details-tabs">
                    <div class="grid">
                        <div class="mt-5" id="left-bar">
                            <div class="h-27rem" *ngIf="this.quote?.allCoversArray">
                                <app-quote-slip-template-one id="RequisitionReview_QuoteSlip_TemplateOne" [selectedQuoteOption]="this.selectedQuoteOption" 
                                    [quote]="this.quote"></app-quote-slip-template-one>
                            </div>
                        </div>
                        <div class="mt-4 flex justify-content-center w-full" id="right-bar"
                            *ngIf="this.isSendToInsurer && !this.isOtc">
                            <app-select-insurer [quote]="this.quote" [gmcQuoteOption]="this.selectedQuoteOption"
                                (mappedIcNamesChange)="this.mappedIcNamesChange($event)"></app-select-insurer>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>