<p-menubar class="layout-topbar">
    <ng-template pTemplate="start">

        <div class="dropdown">
            <div class="align-items-center col-lg-4 mb-2 mb-lg-0 link-dark text-decoration-none " id="AppTopBar">
                <!-- <img src="./../assets/broker/images/logos/new-india-assurance-co-ltd.png"> -->
                <img src="./../assets/logo.png" id="AppTopBar_Image">
            </div>

        </div>

        <!-- <img src="./../assets/logo.png" id="AppTopBar_Image"> -->
    </ng-template>
</p-menubar>

<div class="review-quote-details mt-5" *ngIf="!isLinkExpired && !ismakePayment">
    <div class="pdf-inner">
        <div class="header-section mb-5">

            <div>
                <div class="header-section-inner">
                    <div class="grid">
                        <div class="col-6">
                            <h3 style="font-size: 50px;font-weight: 800 !important">Payment    Details</h3>
                        </div>
                        <div class="col-6">
                            <!-- <h4 class="mt-3" id="QuoteSlip_ProductType">{{this.quote?.productId?.type}}</h4> -->
                            <!-- <p id="QuoteSlip_Client_Name">{{this.quote?.clientId?.name}}</p> -->
                        </div>
                    </div>
                    <div class="grid p-3" style="font-size: 10px !important;">
                        <div class="col-3">
                            <div>
                                <h6 id="QuoteSlip_QuoteNo_label">    No</h6>
                            </div>
                            <div id="QuoteSlip_QuoteNo">{{this.quote?.quoteNo}}</div>
                        </div>
                        <div class="col-3">
                            <div>
                                <h6 id="QuoteSlip_Client_Name_label">Client Name</h6>
                            </div>
                            <div id="QuoteSlip_Branch_Name"> {{this.quote?.clientId?.name}} </div>
                        </div>
                        <!-- <div class="col-2">
                            <div>
                                <h6 id="QuoteSlip_PolicyType_label">Policy Type</h6>
                            </div>
                            <div class="text-capitalize" id="QuoteSlip_PolicyType">{{this.quote.quoteType}}</div>
                        </div> -->
                        <!-- <div class="col-2">
                            <div>
                                <h6 id="QuoteSlip_IMD_label">IMD</h6>
                            </div>
                            <div id="QuoteSlip_IMD">{{this.quote?.originalIntermediateName}}</div>
                        </div> -->
                        <div class="col-3">
                            <div>
                                <h6 id="QuoteSlip_QuoteDate_label">Quotation issued</h6>
                            </div>
                            <div id="QuoteSlip_QuoteDate">{{this.quote?.createdAt | date}}</div>
                        </div>
                        <!-- <div class="col-2">
                            <div>
                                <h6 id="QuoteSlip_Branch_Name_label">Branch Name</h6>
                            </div>
                            <div id="QuoteSlip_Branch_Name"> - </div>
                        </div> -->
                        <!-- <div class="col-2">
                            <div>
                                <h6 id="QuoteSlip_Commission/Brokerage_label">Commission/Brokerage</h6>
                            </div>
                            <div id="QuoteSlip_Commission/Brokerage">as per IRDA</div>
                        </div> -->
                        <div class="col-3">
                            <div>
                                <h6 id="QuoteSlip_ProposerName_label">Proposer Name</h6>
                            </div>
                            <div id="QuoteSlip_ProposerName">{{this.quote?.clientId?.name}}</div>
                        </div>
                        <div class="col-3">
                            <div>
                                <h6 id="QuoteSlip_Policy_Inception_Date_label">Policy Inception Date</h6>
                            </div>
                            <div id="QuoteSlip_Policy_Inception_Date">{{this.quote?.riskStartDate | date}}</div>
                        </div>
                        <!-- <div class="col-2">
                            <div>
                                <h6 id="QuoteSlip_PolicyPeriod_label">Policy Period</h6>
                            </div>
                            <div id="QuoteSlip_PolicyPeriod">{{ this.quote.renewalPolicyPeriod }} from the Inception Date</div>
                        </div> -->
                        <!-- <div class="col-2" *ngIf="this.quote?.productId['productTemplate'] != AllowedProductTemplate.GMC">
                            <div>
                                <h6 id="QuoteSlip_NumberOfLocations_label">Number of Locations</h6>
                            </div>
                            <div id="QuoteSlip_NumberOfLocations"> {{ this.quote?.allCoversArray?.quoteLocationOccupancies?.length }}</div>
                        </div> -->
                        <!-- <div class="col-2" *ngIf="this.quote?.productId['productTemplate'] != AllowedProductTemplate.GMC">
                            <div>
                                <h6 id="QuoteSlip_Hypothication_label">Hypothication</h6>
                            </div>
                            <div id="QuoteSlip_Hypothication">{{this.quote?.hypothication ?? '-' }} </div>
                        </div> -->
                        <div class="col-8">
                            <div>
                                <h6 id="QuoteSlip_Correspondence_Address_label">Correspondence Address</h6>
                            </div>
                            <div id="QuoteSlip_Correspondence_Address">{{this.quote?.clientAddress}}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="py-5">
            <div *ngIf="!isPaymentDone && !isPaymentFailed" class="align-items-center w-100" style="text-align:center">
                <h5>Sum Insured : <span><app-currency [value]="(this?.sumInsured ?? 0)"></app-currency></span>/-</h5>
                <br>
                <!-- <h5>Premium : <span><app-currency [value]="(this?.quote.totalIndictiveQuoteAmt ?? 00)"></app-currency></span>/-</h5><br> -->
                <h5>GST 18% : <span><app-currency [value]="(this?.gst ?? 0)"></app-currency></span>/-</h5><br>
                <h5>Total Premium : <span><app-currency
                            [value]="(this?.quote.totalIndictiveQuoteAmtWithGst ?? 0)"></app-currency></span>/-</h5><br>
                <button class="btn btn-success" (click)="makePayment()" [disabled]="isPaymentDone">Make Payment</button>
            </div>
            
            <div *ngIf="isPaymentDone">
                <div class="temp success">
                    <div class="temp-panel">
                        <h3>Payment Done</h3>
                        <p>Congratulations!! Your payment is successful. You will receive policy details on email and
                            SMS shortly.</p>
                    </div>
                </div>
            </div>
            <div *ngIf="isPaymentFailed">
                <div class="temp error">
                    <div class="temp-panel ">
                        <h3>Payment Failed</h3>
                        <p>Your payment is failed. Please generate a new payment link to proceed.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div *ngIf="isLinkExpired && !ismakePayment">
    <div class="exception-body error">
        <div class="exception-panel">
            <h3>URL Expired</h3>
            <p *ngIf="(this.lastError$ | async)?.message === null">Url expired please contact your broker.
            </p>
        </div>
    </div>
</div>
 
<div *ngIf="ismakePayment">
    <div class="imgpayment">
            <img src="./../assets/payments/payment.png" id="AppTopBar_Image">
            <div class="align-items-center w-100">
            <button class="btn btn-success" (click)="pay()">Pay</button>
            <button class="btn btn-danger mx-2" (click)="cancel()">cancel</button>
            </div>
        </div>
</div>
